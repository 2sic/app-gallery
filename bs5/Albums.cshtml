@inherits AppCode.Razor.AppRazor
@using ToSic.Razor.Blade
@using AppCode.Data
@{
  var effect = "effect-zoom";         // effect on mouse-over; alternative: "effect-darken"; 
  var bsPill = Kit.Css.Is("bs5")      // counter-pill uses a different Bootstrap class for BS5 / BS4
    ? "rounded-pill"
    : "badge-pill";
}

<div class="app-ga7-main">
  <div class="row">
    @* Loop through all the Albums *@
    @foreach (var album in AsList<Album>(MyData)) {
      // Picture: Prefer the main thumbnail, otherwise the first album image, or fallback to the app icon

      // prepare the picture tag
      var mainPicTag = album.IsNotEmpty("AlbumThumbnail")
        ? Kit.Image.Picture(album.AlbumThumbnailFile, settings: "Content", factor: "4/12", imgAltFallback: album.Title)
        : album.ImagesFile != null 
          ? Kit.Image.Picture(album.ImagesFile, settings: "Content", factor: "4/12", imgAltFallback: album.Title)
          : Kit.Image.Picture(App.Folder.Url + "/app-icon.png", settings: "Content", factor: "4/12", imgAltFallback: album.Title);

      // Show one Album Thumbnail with Link etc.
      <div class="col-12 col-sm-6 col-md-6 col-lg-4 mb-4" @Kit.Toolbar.Default(album)>
        <a class="app-ga7" href='@Link.To(parameters: "album=" + album.Path)'>
          <figure class="app-ga7-image @effect" @mainPicTag.Toolbar()>
            @mainPicTag
            <figcaption class="overlay d-flex align-items-end">
              <div class="caption with-badge">
                <span class="text-uppercase">@album.Title</span>
                <span class="badge @bsPill">@album.ImagesFolder.Files.Count()</span>
              </div>
            </figcaption>
          </figure>
        </a>
      </div>
    }
  </div>
</div>

@Html.Partial("Assets.cshtml")