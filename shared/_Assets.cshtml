@inherits Custom.Hybrid.Razor12
@{
  // get CSS information about the current Theme
  var pageCss = GetService<Connect.Koi.ICss>();
}
@* show warning for admin if koi.json is missing *@
@if(pageCss.IsUnknown && CmsContext.User.IsSiteAdmin) {
  <div class='dnnFormMessage dnnFormWarning'>
    @Html.Raw(Connect.Koi.Messages.CssInformationMissing) <br>
    @Html.Raw(Connect.Koi.Messages.OnlyAdminsSeeThis)
  </div>
}

@* Include styles of the App *@
<link rel="stylesheet" href="@App.Path/dist/bs4.min.css" data-enableoptimizations="true" />

@* Include bootstrap 4 if the framework isn't known - then this file is still called, and we add Bootstrap to the page *@
@if(!pageCss.Is("bs4")) {
  // Note that the link and script tags are in the App Settings to make it easier to update a live installation
  @Html.Raw(App.Settings.AssetsBootstrap) 
}

@* Include libaries / scripts *@
@if(DynamicModel.scripts == true) {
  // tell DNN to load jquery as it's needed by fancybox
  // Oqtane doesn't need this, as jQuery is always preloaded as of now
  #if !NETCOREAPP
    DotNetNuke.Framework.JavaScriptLibraries.JavaScript.RequestRegistration(DotNetNuke.Framework.JavaScriptLibraries.CommonJs.jQuery);
  #endif
}

@if(DynamicModel.scripts == true) {
  @Html.Raw(App.Settings.AssetsFancybox)
  <script type="text/javascript" src="@App.Path/dist/scripts.min.js" data-enableoptimizations="bottom"></script>
  <script type="text/javascript">    
    $(function() { if(window.appGallery) window.appGallery.activateGalleryAll() });
  </script>
}
