@inherits Custom.Hybrid.Razor12
@using ToSic.Razor.Blade;
@using Dynlist = System.Collections.Generic.IEnumerable<dynamic>;
@{
  // Determine the widths of each part, based on 12 Bootstrap Cols
  const int bsColumns = 12;
  var imgColumns = 4;

  // Image Settings http://r.2sxc.org/settings
  var imgSettings = Settings.Images.Content;
  var width = (int)(imgSettings.Width * imgColumns / bsColumns);
  var height = (int)(imgSettings.AspectRatio * width);
  var thumbnailParams = "?w=" + width + "&h=" + height + "&mode=crop&scale=both&quality=" + (int)imgSettings.Quality;
}

<div class="ga-wrapper">
  <div class="ga-albums">
    <div class="row">
      @foreach (var album in AsList(Data)) {
        var images = AsAdam(album, "Images").Files as Dynlist;
        var albumThumbUrl = Text.Has(album.AlbumThumbnail)
          ? album.AlbumThumbnail
          : images.First().Url;
        var linkAlbum = Tags.SafeUrl(Link.To(parameters: "album=" + album.Path));
        var linkThumbnail = Tags.SafeUrl(albumThumbUrl + thumbnailParams);

        <div class="ga-album col-12 col-sm-6 col-md-6 col-lg-4" @Edit.TagToolbar(album)>
          <a href='@linkAlbum'>
            <div class="ga-img">
              <div class="overlay">
                <div class="ga-album-title"><h5 class="ga-title">@album.Title</h5></div>
                <div class="ga-files-count"><span class="badge badge-pill badge-dark float-right">@images.Count()</span></div>
              </div>
              <img class="img-fluid" src='@linkThumbnail' alt="@album.Title" />
            </div>
          </a>
        </div>
      }
    </div>
  </div>
</div>

@Html.Partial("_Part WebResources.cshtml")